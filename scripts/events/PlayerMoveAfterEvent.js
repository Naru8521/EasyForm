const a43_0x55d437=a43_0x133a;(function(_0x504aca,_0x190252){const _0x26af03=a43_0x133a,_0x17d855=_0x504aca();while(!![]){try{const _0xa0b2e3=parseInt(_0x26af03(0x164))/0x1*(-parseInt(_0x26af03(0x179))/0x2)+parseInt(_0x26af03(0x16e))/0x3+-parseInt(_0x26af03(0x178))/0x4*(-parseInt(_0x26af03(0x16f))/0x5)+parseInt(_0x26af03(0x158))/0x6*(parseInt(_0x26af03(0x169))/0x7)+-parseInt(_0x26af03(0x157))/0x8+-parseInt(_0x26af03(0x15a))/0x9*(-parseInt(_0x26af03(0x162))/0xa)+-parseInt(_0x26af03(0x16c))/0xb*(parseInt(_0x26af03(0x176))/0xc);if(_0xa0b2e3===_0x190252)break;else _0x17d855['push'](_0x17d855['shift']());}catch(_0x42753c){_0x17d855['push'](_0x17d855['shift']());}}}(a43_0x4369,0x1b56e));function a43_0x4369(){const _0x5aabec=['805gXjgpF','Riding','set','22jupIPV','playerLeave','397326WyJwSb','5120bfGryL','Jump','inputInfo','SHIFT','unsubscribe','subscribe','diqxA','25500sorRZB','SPACE','260hgqWql','6uduuwR','jkmbZ','length','runInterval','WxEFd','1267832nJBlwQ','10818UlhUuu','sqrt','452826Uttiwa','delete','filter','sANKF','OcHoq','getMovementVector','afterEvents','ZpkOl','10YFErFF','getComponent','60650Qsriom','sQfpK','location','isSwimming','push'];a43_0x4369=function(){return _0x5aabec;};return a43_0x4369();}import{ButtonState,EntityComponentTypes,InputButton,InputInfo,InputMode,Player,system,world}from'@minecraft/server';export var PlayerInputKey;(function(_0x49b036){const _0x104a80=a43_0x133a,_0x16d65a={'sQfpK':'SPACE'};_0x49b036['W']='W',_0x49b036['A']='A',_0x49b036['S']='S',_0x49b036['D']='D',_0x49b036[_0x16d65a['sQfpK']]=_0x16d65a[_0x104a80(0x165)],_0x49b036['SHIFT']=_0x104a80(0x172);}(PlayerInputKey||(PlayerInputKey={})));function a43_0x133a(_0x307023,_0x332b2f){const _0x4369ed=a43_0x4369();return a43_0x133a=function(_0x133a8d,_0x40b207){_0x133a8d=_0x133a8d-0x157;let _0x1539f5=_0x4369ed[_0x133a8d];return _0x1539f5;},a43_0x133a(_0x307023,_0x332b2f);}export const PlayerInputKeys={'W':PlayerInputKey['W'],'A':PlayerInputKey['A'],'S':PlayerInputKey['S'],'D':PlayerInputKey['D'],'SPACE':PlayerInputKey[a43_0x55d437(0x177)],'SHIFT':PlayerInputKey[a43_0x55d437(0x172)]};const callbacks=new Map(),playerLastPositions=new Map(),playerBeforePressKeys=new Map();export default class PlayerMoveAfterEventClass{constructor(_0x310348){const _0x328078=a43_0x55d437;callbacks[_0x328078(0x16b)](_0x310348,!![]);}static[a43_0x55d437(0x174)](_0x45d413){new PlayerMoveAfterEventClass(_0x45d413);}static[a43_0x55d437(0x173)](_0x9df2df){const _0xff2868=a43_0x55d437;callbacks[_0xff2868(0x15b)](_0x9df2df);}}world[a43_0x55d437(0x160)][a43_0x55d437(0x16d)][a43_0x55d437(0x174)](_0x3ef212=>{const _0x50c40e=a43_0x55d437,{playerId:_0x4fcb9e}=_0x3ef212;playerLastPositions[_0x50c40e(0x15b)](_0x4fcb9e),playerBeforePressKeys['delete'](_0x4fcb9e);}),system[a43_0x55d437(0x17c)](()=>{const _0x3f0978=a43_0x55d437,_0x4b8739={'DZoSu':function(_0x21a28d,_0x19d54e){return _0x21a28d(_0x19d54e);},'WxEFd':function(_0x1b4e27,_0x545e6d){return _0x1b4e27>_0x545e6d;},'diqxA':function(_0x43fe4f,_0x68da67){return _0x43fe4f-_0x68da67;},'ssPZi':function(_0x597929,_0x14a681){return _0x597929-_0x14a681;},'sANKF':function(_0x3a6c3b,_0x2318ae){return _0x3a6c3b+_0x2318ae;},'OcHoq':function(_0x51b501,_0x205bc2){return _0x51b501*_0x205bc2;},'ZpkOl':function(_0x81589b,_0x5c9336){return _0x81589b*_0x5c9336;},'Ddvoo':function(_0x2da4aa,_0x1f8e86){return _0x2da4aa*_0x1f8e86;}},_0x2acff4=world['getAllPlayers']();for(const _0x34d796 of _0x2acff4){const _0x22e6f0=_0x34d796[_0x3f0978(0x171)],_0x4b1494=_0x4b8739['DZoSu'](getPressedKeys,_0x22e6f0);if(_0x4b8739[_0x3f0978(0x17d)](_0x4b1494[_0x3f0978(0x17b)],0x0)){const _0x30de62=playerBeforePressKeys['get'](_0x34d796['id'])||[],_0x6eeb51=_0x4b1494[_0x3f0978(0x15c)](_0x435aee=>!_0x30de62['includes'](_0x435aee)),_0x296af6=playerLastPositions['get'](_0x34d796['id']),_0x4cfc6a=_0x34d796[_0x3f0978(0x166)];let _0x51274a=0x0;if(_0x296af6){const _0x3f1636=_0x4b8739[_0x3f0978(0x175)](_0x4cfc6a['x'],_0x296af6['x']),_0x1148b5=_0x4cfc6a['y']-_0x296af6['y'],_0x5efb71=_0x4b8739['ssPZi'](_0x4cfc6a['z'],_0x296af6['z']);_0x51274a=Math[_0x3f0978(0x159)](_0x4b8739[_0x3f0978(0x15d)](_0x4b8739[_0x3f0978(0x15d)](_0x4b8739[_0x3f0978(0x15e)](_0x3f1636,_0x3f1636),_0x4b8739[_0x3f0978(0x161)](_0x1148b5,_0x1148b5)),_0x4b8739['Ddvoo'](_0x5efb71,_0x5efb71)));}playerLastPositions['set'](_0x34d796['id'],{..._0x4cfc6a});const _0x211504={'player':_0x34d796,'keys':_0x4b1494,'device':_0x22e6f0['lastInputModeUsed'],'firstKeys':_0x6eeb51,'distance':_0x51274a,'isSwimming':_0x34d796[_0x3f0978(0x167)],'isRiding':!!_0x34d796[_0x3f0978(0x163)](EntityComponentTypes[_0x3f0978(0x16a)])};callbacks['forEach']((_0x11e8fa,_0x27beba)=>_0x27beba(_0x211504));}playerBeforePressKeys[_0x3f0978(0x16b)](_0x34d796['id'],_0x4b1494);}});export function getPressedKeys(_0x44d2d6){const _0x3a0d72=a43_0x55d437,_0x5e4f21={'cSpia':function(_0x2a4c98,_0x5d457f){return _0x2a4c98>_0x5d457f;},'aOvYv':function(_0x37d267,_0x3d8a20){return _0x37d267<_0x3d8a20;},'xjmpP':function(_0x3890cd,_0x13694f){return _0x3890cd<_0x13694f;},'jkmbZ':function(_0x164691,_0x6f6213){return _0x164691===_0x6f6213;}},{x:_0x13f8ca,y:_0x1b42e4}=_0x44d2d6[_0x3a0d72(0x15f)](),_0x4ee02b=[];if(_0x5e4f21['cSpia'](_0x1b42e4,0x0))_0x4ee02b[_0x3a0d72(0x168)](PlayerInputKey['W']);if(_0x5e4f21['aOvYv'](_0x1b42e4,0x0))_0x4ee02b[_0x3a0d72(0x168)](PlayerInputKey['S']);if(_0x5e4f21['xjmpP'](_0x13f8ca,0x0))_0x4ee02b[_0x3a0d72(0x168)](PlayerInputKey['A']);if(_0x5e4f21['cSpia'](_0x13f8ca,0x0))_0x4ee02b[_0x3a0d72(0x168)](PlayerInputKey['D']);return _0x5e4f21[_0x3a0d72(0x17a)](_0x44d2d6['getButtonState'](InputButton[_0x3a0d72(0x170)]),ButtonState['Pressed'])&&_0x4ee02b['push'](PlayerInputKey[_0x3a0d72(0x177)]),_0x44d2d6['getButtonState'](InputButton['Sneak'])===ButtonState['Pressed']&&_0x4ee02b['push'](PlayerInputKey[_0x3a0d72(0x172)]),_0x4ee02b;}