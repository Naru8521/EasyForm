const a43_0x2076bd=a43_0x4da0;function a43_0x4da0(_0x50aa08,_0x13fa54){const _0x2a97db=a43_0x2a97();return a43_0x4da0=function(_0x4da086,_0xb81206){_0x4da086=_0x4da086-0x14c;let _0x74fb39=_0x2a97db[_0x4da086];return _0x74fb39;},a43_0x4da0(_0x50aa08,_0x13fa54);}(function(_0x29d1c1,_0x489b3d){const _0x5e2474=a43_0x4da0,_0x2048df=_0x29d1c1();while(!![]){try{const _0xc91723=parseInt(_0x5e2474(0x14c))/0x1*(-parseInt(_0x5e2474(0x15b))/0x2)+-parseInt(_0x5e2474(0x15f))/0x3*(parseInt(_0x5e2474(0x159))/0x4)+-parseInt(_0x5e2474(0x158))/0x5+-parseInt(_0x5e2474(0x162))/0x6*(-parseInt(_0x5e2474(0x170))/0x7)+-parseInt(_0x5e2474(0x157))/0x8*(-parseInt(_0x5e2474(0x16a))/0x9)+-parseInt(_0x5e2474(0x14f))/0xa*(-parseInt(_0x5e2474(0x16c))/0xb)+parseInt(_0x5e2474(0x156))/0xc*(parseInt(_0x5e2474(0x174))/0xd);if(_0xc91723===_0x489b3d)break;else _0x2048df['push'](_0x2048df['shift']());}catch(_0x16a7f6){_0x2048df['push'](_0x2048df['shift']());}}}(a43_0x2a97,0xc0ca2));import{ButtonState,EntityComponentTypes,InputButton,InputInfo,InputMode,Player,system,world}from'@minecraft/server';export var PlayerInputKey;function a43_0x2a97(){const _0x327c6a=['jCvuW','Sneak','1126647pyLIih','forEach','RBJrV','159582sWDdjo','SHIFT','Jump','getAllPlayers','yqdTT','sqrt','iLweh','afterEvents','98847sGwbnb','set','440zEiZaG','getMovementVector','getButtonState','location','63sNyxnb','delete','FyQJP','OrgQQ','36231IpoIPD','SGZzc','split','filter','464062ygVivn','runInterval','unsubscribe','138970ezxPGm','YKVEm','Pressed','includes','getComponent','DqJPZ','QDjqN','4452cehAWQ','1072tycjlN','2282575XeRqkJ','12LNFjjQ','push','4IWQwlE','get'];a43_0x2a97=function(){return _0x327c6a;};return a43_0x2a97();}(function(_0x5a2112){const _0x24d319=a43_0x4da0,_0x527b8e={'uZbbS':'1|3|2|4|0|5','OrgQQ':'SPACE','SGZzc':'SHIFT'},_0x35bf12=_0x527b8e['uZbbS'][_0x24d319(0x176)]('|');let _0x1eadad=0x0;while(!![]){switch(_0x35bf12[_0x1eadad++]){case'0':_0x5a2112[_0x527b8e[_0x24d319(0x173)]]=_0x527b8e['OrgQQ'];continue;case'1':_0x5a2112['W']='W';continue;case'2':_0x5a2112['S']='S';continue;case'3':_0x5a2112['A']='A';continue;case'4':_0x5a2112['D']='D';continue;case'5':_0x5a2112[_0x527b8e[_0x24d319(0x175)]]=_0x527b8e[_0x24d319(0x175)];continue;}break;}}(PlayerInputKey||(PlayerInputKey={})));export const PlayerInputKeys={'W':PlayerInputKey['W'],'A':PlayerInputKey['A'],'S':PlayerInputKey['S'],'D':PlayerInputKey['D'],'SPACE':PlayerInputKey['SPACE'],'SHIFT':PlayerInputKey[a43_0x2076bd(0x163)]};const callbacks=new Map(),playerLastPositions=new Map(),playerBeforePressKeys=new Map();export default class PlayerMoveAfterEventClass{constructor(_0x468005){const _0x4f7aeb=a43_0x2076bd;callbacks[_0x4f7aeb(0x16b)](_0x468005,!![]);}static['subscribe'](_0x294bdc){new PlayerMoveAfterEventClass(_0x294bdc);}static[a43_0x2076bd(0x14e)](_0x4c598c){const _0x11c6dd=a43_0x2076bd;callbacks[_0x11c6dd(0x171)](_0x4c598c);}}world[a43_0x2076bd(0x169)]['playerLeave']['subscribe'](_0x573c74=>{const _0x1df88c=a43_0x2076bd,{playerId:_0xfc7497}=_0x573c74;playerLastPositions[_0x1df88c(0x171)](_0xfc7497),playerBeforePressKeys['delete'](_0xfc7497);}),system[a43_0x2076bd(0x14d)](()=>{const _0x608f01=a43_0x2076bd,_0x926cc6={'DqJPZ':function(_0x2acc8f,_0x431713){return _0x2acc8f(_0x431713);},'QDjqN':function(_0x2bd28c,_0x57befc){return _0x2bd28c-_0x57befc;},'jCvuW':function(_0x1b8ce2,_0x40cc47){return _0x1b8ce2+_0x40cc47;},'iLweh':function(_0x4b5b60,_0x11039a){return _0x4b5b60+_0x11039a;},'YKVEm':function(_0x195224,_0x4072a7){return _0x195224*_0x4072a7;}},_0x202d83=world[_0x608f01(0x165)]();for(const _0x33cb75 of _0x202d83){const _0x11af76=_0x33cb75['inputInfo'],_0x4fd0be=_0x926cc6[_0x608f01(0x154)](getPressedKeys,_0x11af76);if(_0x4fd0be['length']>0x0){const _0x58d6f0=playerBeforePressKeys['get'](_0x33cb75['id'])||[],_0x4d1b21=_0x4fd0be[_0x608f01(0x177)](_0x2b26ee=>!_0x58d6f0[_0x608f01(0x152)](_0x2b26ee)),_0x418290=playerLastPositions[_0x608f01(0x15c)](_0x33cb75['id']),_0x552eeb=_0x33cb75[_0x608f01(0x16f)];let _0x51414a=0x0;if(_0x418290){const _0x5d6de0=_0x926cc6['QDjqN'](_0x552eeb['x'],_0x418290['x']),_0x58ee78=_0x552eeb['y']-_0x418290['y'],_0x412f07=_0x926cc6[_0x608f01(0x155)](_0x552eeb['z'],_0x418290['z']);_0x51414a=Math[_0x608f01(0x167)](_0x926cc6[_0x608f01(0x15d)](_0x926cc6[_0x608f01(0x168)](_0x5d6de0*_0x5d6de0,_0x926cc6['YKVEm'](_0x58ee78,_0x58ee78)),_0x926cc6[_0x608f01(0x150)](_0x412f07,_0x412f07)));}playerLastPositions[_0x608f01(0x16b)](_0x33cb75['id'],{..._0x552eeb});const _0x2534ab={'player':_0x33cb75,'keys':_0x4fd0be,'device':_0x11af76['lastInputModeUsed'],'firstKeys':_0x4d1b21,'distance':_0x51414a,'isSwimming':_0x33cb75['isSwimming'],'isRiding':!!_0x33cb75[_0x608f01(0x153)](EntityComponentTypes['Riding'])};callbacks[_0x608f01(0x160)]((_0x55997d,_0x1495ca)=>_0x1495ca(_0x2534ab));}playerBeforePressKeys['set'](_0x33cb75['id'],_0x4fd0be);}});export function getPressedKeys(_0x1a1f00){const _0x5e19a6=a43_0x2076bd,_0x18527d={'yqdTT':function(_0x25a8ed,_0x2afe55){return _0x25a8ed>_0x2afe55;},'FyQJP':function(_0x393626,_0x1d4fd7){return _0x393626===_0x1d4fd7;},'RBJrV':function(_0x296aa3,_0x43479f){return _0x296aa3===_0x43479f;}},{x:_0x15db38,y:_0x317e20}=_0x1a1f00[_0x5e19a6(0x16d)](),_0x245adc=[];if(_0x18527d[_0x5e19a6(0x166)](_0x317e20,0x0))_0x245adc[_0x5e19a6(0x15a)](PlayerInputKey['W']);if(_0x317e20<0x0)_0x245adc['push'](PlayerInputKey['S']);if(_0x15db38<0x0)_0x245adc['push'](PlayerInputKey['A']);if(_0x15db38>0x0)_0x245adc[_0x5e19a6(0x15a)](PlayerInputKey['D']);return _0x18527d[_0x5e19a6(0x172)](_0x1a1f00[_0x5e19a6(0x16e)](InputButton[_0x5e19a6(0x164)]),ButtonState[_0x5e19a6(0x151)])&&_0x245adc['push'](PlayerInputKey['SPACE']),_0x18527d[_0x5e19a6(0x161)](_0x1a1f00[_0x5e19a6(0x16e)](InputButton[_0x5e19a6(0x15e)]),ButtonState['Pressed'])&&_0x245adc[_0x5e19a6(0x15a)](PlayerInputKey[_0x5e19a6(0x163)]),_0x245adc;}